{
  "$schema": "https://opencode.ai/config.json",
  
  // == Theme & Model Configuration ==
  "theme": "opencode",
  "model": "anthropic/claude-sonnet-4-20250514",
  "autoupdate": "notify",
  
  // == Compaction Settings ==
  "compaction": {
    "auto": true,
    "prune": true
  },

  // == File Watcher Ignore Patterns ==
  "watcher": {
    "ignore": [
      "node_modules/**",
      ".git/**",
      "dist/**",
      "build/**",
      "__pycache__/**",
      "*.pyc",
      ".venv/**",
      "venv/**",
      ".mypy_cache/**",
      ".pytest_cache/**",
      ".ruff_cache/**"
    ]
  },

  // == Tool Permissions ==
  "permission": {
    "read": "allow",
    "list": "allow",
    "glob": "allow",
    "grep": "allow",
    "webfetch": "allow",
    "skill": "allow",
    "todoread": "allow",
    "todowrite": "allow",
    "question": "allow",
    "edit": "allow",
    "write": "allow",
    "bash": "ask",
    "lsp": "allow"
  },

  // == Custom Agents ==
  "agent": {
    // Override Build agent with project context
    "build": {
      "mode": "primary",
      "model": "anthropic/claude-sonnet-4-20250514",
      "prompt": "{file:./AGENTS.md}",
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
        "skill": true
      }
    },
    // Override Plan agent for analysis
    "plan": {
      "mode": "primary",
      "model": "anthropic/claude-sonnet-4-20250514",
      "prompt": "{file:./AGENTS.md}",
      "tools": {
        "write": false,
        "edit": false,
        "bash": false,
        "skill": true
      }
    },
    // VSA Developer agent - specialized for this project
    "vsa": {
      "description": "Specialized agent for DeepCode VSA development with LangGraph, Python async patterns, and API integrations",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4-20250514",
      "prompt": "You are a specialist in developing the DeepCode VSA (Virtual Support Agent) project. Focus on:\n\n- Python 3.11+ with async/await patterns\n- LangGraph for agent orchestration (Planner-Executor-Reflector pattern)\n- Pydantic v2 for data validation\n- httpx for async HTTP calls\n- Typer + Rich for CLI\n- API-First architecture with Tool Registry\n- Governance: READ=automatic, WRITE=controlled, DELETE=blocked\n\nAlways read CODEBASE.md and docs/PRD.md for context. Follow ADRs in docs/adr/.\n\nKey patterns:\n1. All I/O operations MUST be async\n2. All data models MUST use Pydantic\n3. All API integrations MUST follow APITool contract\n4. Never implement DELETE operations\n5. WRITE operations require dry_run=True first",
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
        "skill": true
      }
    },
    // GLPI Integration agent
    "glpi": {
      "description": "Specialist for GLPI ITSM API integration",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4-20250514",
      "prompt": "You specialize in GLPI REST API integration. Focus on:\n- Ticket management (GET, POST)\n- SLA monitoring\n- Asset queries\n- User/group management\n\nFollow the APITool contract pattern. Use async httpx. Implement governance (READ=auto, WRITE=dry_run first).",
      "tools": {
        "write": true,
        "edit": true,
        "bash": false,
        "skill": true
      }
    },
    // Zabbix Integration agent
    "zabbix": {
      "description": "Specialist for Zabbix monitoring API integration",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4-20250514",
      "prompt": "You specialize in Zabbix JSON-RPC API integration. Focus on:\n- Alert queries\n- Host/hostgroup management\n- Trigger analysis\n- Problem correlation\n\nFollow the APITool contract pattern. Use async httpx. READ operations only for v1.",
      "tools": {
        "write": true,
        "edit": true,
        "bash": false,
        "skill": true
      }
    },
    // Security auditor for the project
    "security": {
      "description": "Security auditor for code review and vulnerability detection",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4-20250514",
      "prompt": "You are a security expert reviewing Python code. Focus on:\n- Input validation vulnerabilities\n- Authentication/authorization flaws\n- Credential exposure (API keys, tokens)\n- Injection vulnerabilities\n- Dependency security\n- OWASP best practices",
      "tools": {
        "write": false,
        "edit": false,
        "bash": false,
        "skill": true
      }
    }
  },

  // == Experimental Features ==
  "experimental": {
    "lsp": true
  }
}
